---
title: "SDS 3386"
subtitle: "Assignment 1"
author: "Peter Rabinovitch"
date: "`r Sys.time()`"
output: 
  html_document:
    code_folding: hide
    toc: true
    toc_float: true
---

```{r setup, include=FALSE, echo = FALSE, warning=FALSE}
knitr::opts_chunk$set(echo = TRUE, fig.height = 3, fig.width = 7)
```

# Stuff

Your assignment is due Sept 17, 23:59. Generally all assignments will be due the day after the next class, to give you one more opportunity to ask questions. But of course, you shouldn't wait until then!

Submit your answers via Brightspace. You are required to submit (for this and all other work, unless otherwise specified) two files: a .Rmd file and the resulting .html file. I will knit the Rmd file and I should get _exactly_ your html file - and we will both be unhappy if I don't (i.e. you will lose marks). The reason for this to get you in the habit of writing documents that can be reproduced at the click of a button, so that when the data changes (as it inevitably will), you don't have to start from scratch. Sure, it would be pretty easy to reproduce this document in a week, but imagine a complicated analysis document with tons of stats and plots, and now imagine that you have to update it in six months - will you remember all the steps? Doubtful. So, we'll start with good habits now.

Note that you may use this file "Assignment_1_v1.Rmd" from Brightspace as a template to get you started. 

Also to include code you need to do this:
```{r}
3+2
```

and that with the document set up this way (i.e. the yaml header) only the results will display because we set code folding to 'hide'. This is _very_ useful because it allows you to write one document that is readable by your boss (who does not care about your code, only the results), but allows you to display and consult the code when you are asked a question about something specific and do not remember exactly what you did (trust me, it happens). 


# First
- install these libraries
    - dplyr, tidyr, broom, lubridate, knitr, readr, ggplot2, stringr, magrittr, markdown, purrr, rmarkdown, tibble, readxl, janitor, ggrepel, skimr
    - note we will likely add to this list as we go, and it is possible that you will need to upgrade your R to make use of the latest versions (but you are all using the latest version, right?)  
    - you can do this from the gui or via 'install.packages(dplyr)' for example
    
    

# Part I Resume 
(Graded out of 4)

In this part of the assignment, I want to learn a little bit about you. Tell me:  

- Your name, student number, program, year, and any relevant quantitative courses  
- How much R do you know? {beginner, intermediate, expert}  
    - Do you know the tidyverse? ggplot? what %>% means?  
- How much stats do you know?  {beginner, intermediate, expert}  
    - Without looking at any sources, tell me what is a p-value?  
    - Do you know about regression?  
- Have you had any quantitative jobs (summer/coop/etc)?  
- Why are you taking this course?  

This is really just to get you started, and for me to know a little about the class.  

This will be graded. If you answer all the questions, spell things properly (RStudio has a built in spell checker - use it!), and generally make an effort you will get a good mark on this part.  

# Part II Payments Doc 
(Graded out of 2)

A large part of data science is in poking stuff, being a 'numbers detective' This is an opportunity to start to develop your sense of data smells....i.e. when the data is bad, it smells bad.

Download the doc http://www.payments.ca/sites/default/files/12-Dec-18/paymentscanada_trendsreport2018_13_0.pdf. The document isn't particularly bad, but has some awkward stuff, errors, etc. Find _one_  thing wrong (or more if you are having fun) and provide an explicit reference to it (eg page, line # etc), explain what is wrong and how you'd make it better.

This will be graded. Please note however, that if you say something is wrong and it isn't, you may lose marks (one student did this last term). So make sure what you are saying is correct. The purpose of this is that it takes a lot of time and hard work to build up your credibility as a data scientist, but one silly error and you can lose that trust very quickly.


# Part III Self Assessment 
(Graded 0 or 4)

The purpose of this section is for you to assess your readiness for this course. If you find all these questions easy and can answer them quickly and correctly you shouldn't have trouble with the course. On the other hand if it is difficult, or time consuming, or your do not fully understand some of the statistical concepts  (eg hypothesis test, confidence interval) or have trouble with getting R to do what you want - then you may struggle with this course and may want to consider doing another course and coming back to this one when you are better prepared. This is stuff you should already know.

I will look at your answers to get a sense of where the class is overall, but you will not be graded on this part other than pass/fail, i.e. you do it you get full marks on this part, you don't you will get 0.

The point is so that you know what you are in for, and so I can tune what we learn to what the class knows.
    
## Part III - A: Using R & Basic EDA

1. Load the data

Load the data from the file I provided on Brightspace (i.e. data_set_1.csv).  
The data consists of results from a bunch of horse races over several months. The same horse may have raced many, or only a few times.  
The fields are:  
- seconds - how long it took for the horse to complete the race  
- odds - the odds of the horse winning  
- hnum - the number the horse was wearing during the race (this can change from race to race)  
- dow - the day of the week the race was on  

2. How many records are there in the data set?

3. What days of the week had races?

4. What are the average & standard deviation of the time to complete the race?

5. Do all days have similar times to complete the race? Answer this with a plot (boxplot or other).

## Part III - B: Basic Inferential Statistics

6. Perform a hypothesis test to see if the time to complete the race is the same on all days, i.e. does dow affect performance?

7. Do the odds matter?

Choose the median of the odds as a splitting point and compare the time to complete the race for horses with low odds to those with high odds.

8. Plot the time to complete the race against the odds to see if your result looks reasonable.

9. What does this plot tell you? Explain

10. Based on what you observed in (9) fix the problem and determine if the day of week matters, and if the odds matter now.

11. Provide an 80% confidence interval for the time to complete the races on a Monday in minutes


## Part III - C: Regression (Optional)

If you know regression and want to try some of this, please go ahead.

Build a linear regression to model the time for a horse to run a race (dependent variable "seconds") based on the independent variables: odds (a measure of the probability of the horse winning the race, where lower odds means that people think the horse is better than a horse with higher odds); hnum ( the number the horse has on its saddle, simply a label more or less randomly assigned before the race begins. Note horse with number 4 in one race could be horse number 7 in another, etc ); dow (the day of the week the race was run). 

12. Display and comment on the commands you used.

13. Display and comment on the regression output.

14. Using this model, what is your best (point) estimate of the time for a horse with odds of 4, hnum 7, running in a race on a Monday?

15. Same as above but what if the race was on a Friday?

16. Same as above but what if the race was on a Wednesday?

Include any plots you think may help to understand the data and/or your regression model.  


# Appendix: sessionInfo

At the end of each submission, please include the following. It prints out the libraries and versions you are using. This is useful for two reasons:
- in six months when you run the same code and different answers, you will be able to track it down to different versions of a library and be able to make an informed decision about what to do
- true story: last term a student submitted a Rmd file that didn't knit on my machine. The student would have lost marks, but looking at sessionInfo I realized the had a more recent version of one library than I did. I installed the latest version and the code knit perfectly, and the student didn't lose any marks.


```{r}
sessionInfo()
```

